# 黄世昌IIC与SPI学习心得

在本次学习过程中，我深入了解了IIC和SPI两种常用的通信协议，并且学习了如何在STM32CUBEMX中配置它们的硬件接口，最终通过实际操作使用IIC和SPI控制显示屏（SSD1306和ST7789）。以下是我对IIC和SPI总线的学习心得。

## IIC

### 什么是IIC

IIC（I²C）是由Philips公司发明的一种串行总线协议，广泛应用于低速设备之间的短距离通信。IIC总线采用了两根线进行通信，分别为数据线(SDA)和时钟线(SCL)，这种简单而高效的结构使其在嵌入式开发中得到了广泛应用。

### IIC总线

IIC总线采用主从模式，一个主设备可以同时控制多个从设备。每个IIC设备都有一个唯一的地址。通信时，主设备通过SDA和SCL两根线控制数据传输，SDA负责传输数据位，SCL负责同步时钟信号。

### SDA与SCL

- **SDA**：数据线，负责数据的传输。
- **SCL**：时钟线，负责控制数据的传输时序。

### 使用IIC控制SSD1306

通过IIC协议，我成功地将SSD1306 OLED显示屏与STM32连接，并实现了基本的显示功能。配置过程中，首先通过IIC总线向SSD1306发送初始化命令，然后通过IIC传输数据来绘制字符和图像。

## SPI

### 什么是SPI

SPI（Serial Peripheral Interface）是一种同步串行通信协议，它使用四根信号线进行数据传输，比IIC更适用于高速传输和数据量较大的场景。SPI通信通常采用全双工模式，可以同时进行数据的发送和接收。

### SPI总线

SPI总线包括以下几条信号线：

- **MOSI**：主设备输出数据，供从设备输入。
- **MISO**：主设备输入数据，供从设备输出。
- **SCK**：时钟信号线，控制数据传输的时序。
- **CS**：片选信号，告诉从设备当前是否可以接收数据。

### SPI时序

SPI协议使用时钟同步传输数据，在每一个时钟脉冲的上升沿或下降沿传输一位数据。SPI传输一般是全双工的，即同时进行发送和接收。时序的配置可以根据需要选择不同的传输模式，例如时钟极性（CPOL）和时钟相位（CPHA）。


### 使用SPI控制ST7789

我通过SPI协议成功地控制了ST7789 LCD显示屏。首先，通过SPI传输初始化命令设置显示屏的工作模式和参数。然后，通过SPI传输数据绘制图像或显示文本。ST7789的控制信号（如DC、RW、RST）需要适当地控制，以确保数据传输和显示操作的正确性。

## 总结与反思

通过这次的学习，我对IIC和SPI协议有了更加深入的理解和实践经验。IIC和SPI各有其特点和适用场景：

- **IIC**：适合用于低速、短距离、设备数量较多的通信场景，具有简单的两线制设计。但在传输速度和带宽上不如SPI。
- **SPI**：适合高速、大数据量传输，支持全双工通信，能够提供更高的传输速度。缺点是需要更多的信号线，且在设备数量较多时需要额外的片选信号。
